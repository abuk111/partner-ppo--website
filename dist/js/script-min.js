"use strict";var navHeight,headerDarkHeight,headerGreyHeight,burgerBtn=document.querySelector(".burger-btn"),burgerBars=document.querySelector(".burger-bar"),navbar=document.querySelector(".navbar"),navbarListItem=document.querySelectorAll(".navbar__list__elements"),nav=document.querySelector(".nav"),allSection=document.querySelectorAll(".section"),date=document.querySelector(".date"),sendBtn=document.querySelector(".form__formbox__send"),nameForm=document.querySelector("#name"),mailForm=document.querySelector("#mail"),phoneForm=document.querySelector("#phone"),messageForm=document.querySelector("#message"),form=document.querySelector(".form__formbox"),popup=document.querySelector(".popup"),popupOk=document.querySelector(".ok"),popupError=document.querySelector(".error"),popupClose=document.querySelector(".popup__window-close"),allPlanImages=document.querySelectorAll(".plans__box-imagebox-img"),imageZoomSection=document.querySelector(".imagezoom"),imageZoom=document.querySelector(".imagezoom__image-img"),zoomCloseBtn=document.querySelector(".imagezoom__closebtn"),showNav=function(){navbar.classList.add("navbar-active"),navbar.classList.remove("navbar-hide"),burgerBars.classList.add("burger-active"),burgerBars.classList.remove("burger-back")},hideNav=function(){navbar.classList.remove("navbar-active"),navbar.classList.add("navbar-hide"),burgerBars.classList.remove("burger-active"),burgerBars.classList.add("burger-back")},navbarItemEntry=function(){var o=0;navbarListItem.forEach(function(e){e.classList.toggle("nav-entry"),e.style.animationDelay="."+o+"s",o++})},scrollDisable=function(e){window.onscroll=function(){window.scrollTo({top:e,left:0,behavior:"instant"})}};function enableScroll(){window.onscroll=function(){}}var navHandling=function(){var e;(navbar.classList.contains("navbar-active")?(hideNav(),enableScroll):(e=window.scrollY,scrollDisable(e),showNav))(),navbarItemEntry(),navbarListItem.forEach(function(e){e.addEventListener("click",hideNav)})},navHighlight=function(e){switch(window.location.pathname){case"/index.html":navbarListItem.forEach(function(e){"mainPage"==e.children[0].id&&e.children[0].classList.add("link-active")});break;case"/uslugi.html":case"/instrukcje.html":case"/kontrole.html":case"/szkolenia.html":case"/plany.html":navbarListItem.forEach(function(e){"servicePage"==e.children[0].id&&e.children[0].classList.add("link-active")});break;case"/doswiadczenie.html":navbarListItem.forEach(function(e){"expPage"==e.children[0].id&&e.children[0].classList.add("link-active")});break;case"/baza-wiedzy.html":navbarListItem.forEach(function(e){"FAQPage"==e.children[0].id&&e.children[0].classList.add("link-active")});break;case"/kontakt.html":navbarListItem.forEach(function(e){"contactPage"==e.children[0].id&&e.children[0].classList.add("link-active")})}},handleDate=function(e){var o=(new Date).getFullYear();date.textContent=o},setNavHeight=function(){window.innerWidth<768?(navHeight=85,headerDarkHeight=245,headerGreyHeight=395):768<=window.innerWidth&&(navHeight=100,headerDarkHeight=310,headerGreyHeight=450)},headerBgAdd=function(){window.scrollY>headerDarkHeight?(nav.classList.add("nav-black-bgc"),nav.classList.remove("nav-dark-bgc"),nav.classList.remove("nav-medium-bgc")):window.scrollY<=headerDarkHeight&&(nav.classList.remove("nav-black-bgc"),nav.classList.remove("nav-dark-bgc"),nav.classList.remove("nav-medium-bgc")),window.scrollY>headerGreyHeight&&(nav.classList.remove("nav-black-bgc"),nav.classList.remove("nav-dark-bgc"),nav.classList.add("nav-medium-bgc"))},navBackgroundAddMobile=function(){var o=window.scrollY;setNavHeight(),allSection.forEach(function(e){e.classList.contains("header-bgc")?headerBgAdd():e.classList.contains("dark-bgc")&&e.offsetTop<=o+navHeight?(nav.classList.remove("nav-black-bgc"),nav.classList.add("nav-dark-bgc"),nav.classList.remove("nav-medium-bgc")):e.classList.contains("medium-bgc")&&e.offsetTop<=o+navHeight&&(nav.classList.remove("nav-black-bgc"),nav.classList.remove("nav-dark-bgc"),nav.classList.add("nav-medium-bgc"))})},navBackgroundAddDesktop=function(){var o=window.scrollY;setNavHeight(),allSection.forEach(function(e){e.classList.contains("medium-bgc")&&e.offsetTop<=o+navHeight?(navbar.classList.add("nav-dark-bgc"),navbar.classList.remove("nav-medium-bgc")):(e.classList.contains("dark-bgc")&&e.offsetTop<=o+navHeight||e.classList.contains("header-bgc"))&&(navbar.classList.remove("nav-dark-bgc"),navbar.classList.add("nav-medium-bgc"))})},checkInput=function(e){e.forEach(function(e){""===e.value?showError(e,e.placeholder):(clearError(e),e===mailForm?checkMail(e):e===phoneForm&&checkPhone(e))})},showError=function(e,o){e=e.parentElement.querySelector(".error-text");e.classList.add("show"),e.textContent=o},clearError=function(e){e=e.parentElement.querySelector(".error-text");e.classList.remove("show"),e.textContent="error"},checkMail=function(e){e.value=e.value.trim(),/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/.test(e.value)?clearError(e):showError(e,"Podaj poprawny email!")},checkPhone=function(e){/^(?<!\w)(\(?(\+|00)?48\)?)?[ -]?\d{3}[ -]?\d{3}[ -]?\d{3}(?!\w)/.test(e.value)?clearError(e):showError(e,"Podaj poprawny telefon!")},checkErrors=function(e){var o=0;if(e.forEach(function(e){"error"!==e.parentElement.querySelector(".error-text").textContent&&o++}),0!==o)return!1;o=0,verifyCaptcha()},verifyForms=function(){checkInput([nameForm,mailForm,phoneForm,messageForm]),checkErrors([nameForm,mailForm,phoneForm,messageForm])},verifyCaptcha=function(){var e=new FormData(form);fetch("mail.php",{method:"POST",body:e,token:document.getElementById("recaptcha-token").value}).then(function(e){e.ok?e.url.includes("?mail_status=sent")?(console.log("Formularz został wysłany"),popup.classList.add("popup-show"),popupOk.style.display="flex",popupError.style.display="none"):(console.log("Wystąpił błąd"),popup.classList.add("popup-show"),popupOk.style.display="none",popupError.style.display="flex"):(console.log("Wystąpił błąd (".concat(e.status,"): ").concat(e.statusText)),popup.classList.add("popup-show"),popupOk.style.display="none",popupError.style.display="flex")}).catch(function(e){console.log(response),console.log("Wystąpił błąd (".concat(response.status,"): ").concat(response.statusText)),popup.classList.add("popup-show"),popupOk.style.display="none",popupError.style.display="flex"})},closePopup=function(){popup.classList.remove("popup-show")},zoomPlanImgMobile=function(e){e=e.src;window.open(e)},zoomPlanImgDesktop=function(e){e=e.src;imageZoomSection.classList.add("imagezoom-show"),imageZoom.setAttribute("src",e)},closeZoomSection=function(){imageZoomSection.classList.remove("imagezoom-show"),imageZoom.setAttribute("src","")},zoomImg=function(e){var o=e.clientX,e=e.clientY,a=imageZoom.offsetLeft+(imageZoomSection.offsetLeft-imageZoomSection.offsetWidth/2),e=-1*(imageZoom.offsetTop+(imageZoomSection.offsetTop-imageZoomSection.offsetHeight/2)-e);imageZoom.style.transformOrigin="".concat(-1*(a-o),"px ").concat(e,"px"),imageZoom.classList.add("zoomed-image")},resetImg=function(){imageZoom.classList.remove("zoomed-image")};burgerBtn.addEventListener("click",navHandling),window.addEventListener("scroll",function(){(window.innerWidth<992?navBackgroundAddMobile:navBackgroundAddDesktop)()}),handleDate(),navHighlight(),allPlanImages&&allPlanImages.forEach(function(o){o.addEventListener("click",function(e){(window.innerWidth<1200?zoomPlanImgMobile:zoomPlanImgDesktop)(o)})}),imageZoom&&(imageZoom.addEventListener("mousemove",zoomImg),imageZoom.addEventListener("mouseout",resetImg)),zoomCloseBtn&&zoomCloseBtn.addEventListener("click",closeZoomSection),sendBtn&&sendBtn.addEventListener("click",function(e){e.preventDefault(),verifyForms()}),popupClose&&popupClose.addEventListener("click",closePopup);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJhbGxTZWN0aW9uIiwibmF2SGVpZ2h0IiwiaGVhZGVyRGFya0hlaWdodCIsImJ1cmdlckJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJ1cmdlckJhcnMiLCJuYXZiYXJMaXN0SXRlbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuYXYiLCJkYXRlIiwic2VuZEJ0biIsIm5hbWVGb3JtIiwibWFpbEZvcm0iLCJwaG9uZUZvcm0iLCJtZXNzYWdlRm9ybSIsImZvcm0iLCJwb3B1cE9rIiwicG9wdXBFcnJvciIsInBvcHVwQ2xvc2UiLCJpbWFnZVpvb21TZWN0aW9uIiwiaW1hZ2Vab29tIiwiem9vbUNsb3NlQnRuIiwibmF2YmFyIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaXRlbSIsImZvckVhY2giLCJ0b2dnbGUiLCJzdHlsZSIsImFuaW1hdGlvbkRlbGF5IiwiZGVsYXlUaW1lIiwic2Nyb2xsRGlzYWJsZSIsIndpbmRvdyIsImxlZnQiLCJzY3JvbGxZIiwiYmVoYXZpb3IiLCJzY3JvbGxUbyIsInRvcCIsImVuYWJsZVNjcm9sbCIsImhpZGVOYXYiLCJjb250YWlucyIsIm5hdmJhckl0ZW1FbnRyeSIsImN1cnJlbnRQYWdlIiwibG9jYXRpb24iLCJwYXRobmFtZSIsIm5hdkhpZ2hsaWdodCIsInBhcmFtcyIsImNoaWxkcmVuIiwiaWQiLCJ0ZXh0Q29udGVudCIsImlubmVyV2lkdGgiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJjdXJyZW50WWVhciIsImhlYWRlckdyZXlIZWlnaHQiLCJoZWFkZXJCZ0FkZCIsIm5hdkJhY2tncm91bmRBZGRNb2JpbGUiLCJjdXJyZW50U2VjdGlvbiIsInNlY3Rpb24iLCJzZXROYXZIZWlnaHQiLCJuYXZCYWNrZ3JvdW5kQWRkRGVza3RvcCIsIm9mZnNldFRvcCIsImNoZWNrSW5wdXQiLCJpbnB1dCIsInNob3dFcnJvciIsImVsIiwicGxhY2Vob2xkZXIiLCJjbGVhckVycm9yIiwiY2hlY2tQaG9uZSIsImVycm9yTXNnIiwiaW5wdXRCb3giLCJlbWFpbCIsIm1zZyIsInBhcmVudEVsZW1lbnQiLCJwaG9uZSIsImNoZWNrRXJyb3JzIiwiZXJyb3JDb3VudCIsInZhbHVlIiwidHJpbSIsInRlc3QiLCJ2ZXJpZnlDYXB0Y2hhIiwiZGF0YSIsIkZvcm1EYXRhIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJwb3B1cCIsInZlcmlmeUZvcm1zIiwibG9nIiwiZXJyb3IiLCJtZXRob2QiLCJib2R5IiwidG9rZW4iLCJvayIsImNsb3NlUG9wdXAiLCJ1cmwiLCJkaXNwbGF5IiwiaW1hZ2UiLCJvcGVuIiwiem9vbVBsYW5JbWdEZXNrdG9wIiwiY29uY2F0Iiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImNsb3NlWm9vbVNlY3Rpb24iLCJzZXRBdHRyaWJ1dGUiLCJ6b29tSW1nIiwiY2xpZW50WSIsIm9mZnNldExlZnQiLCJ6b29tUGxhbkltZ01vYmlsZSIsInNyYyIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVEYXRlIiwiYWxsUGxhbkltYWdlcyIsIngiLCJlIiwiY2xpZW50WCIsInkiLCJvZmZzZXRXaWR0aCIsIm5ld1kiLCJvZmZzZXRIZWlnaHQiLCJuYXZIYW5kbGluZyIsImltZyIsInJlc2V0SW1nIiwicHJldmVudERlZmF1bHQiXSwibWFwcGluZ3MiOiJhQUFBLElBUU1BLFVBQ0ZDLGlCQUNBQyxpQkFWSkMsVUFBQUMsU0FBQUMsY0FBQSxhQUFBLEVBR01DLFdBQWFGLFNBQVNDLGNBQWMsYUFBYSxFQURqREYsT0FBU0MsU0FBV0MsY0FBYyxTQUFDLEVBQ25DQyxlQUFhRixTQUFTQyxpQkFBYyx5QkFBYyxFQUVsREUsSUFBQUEsU0FBaUJILGNBQVNJLE1BQUFBLEVBRTFCQyxXQUFlSixTQUFBQSxpQkFBcUIsVUFBQSxFQU1wQ0ssS0FBT04sU0FBU0MsY0FBYyxPQUFRLEVBSXRDTSxRQUFVUCxTQUFTQyxjQUFjLHNCQUF1QixFQUN4RE8sU0FB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OiJzY3JpcHQtbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTkFWIEFORCBCVVJHRVIgVkFSSUFCTEVTXHJcblxyXG5jb25zdCBidXJnZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLWJ0bicpXHJcbmNvbnN0IGJ1cmdlckJhcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLWJhcicpXHJcbmNvbnN0IG5hdmJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXInKVxyXG5jb25zdCBuYXZiYXJMaXN0SXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZiYXJfX2xpc3RfX2VsZW1lbnRzJylcclxuXHJcbmNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYnKVxyXG5jb25zdCBhbGxTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24nKVxyXG5sZXQgbmF2SGVpZ2h0XHJcbmxldCBoZWFkZXJEYXJrSGVpZ2h0XHJcbmxldCBoZWFkZXJHcmV5SGVpZ2h0XHJcblxyXG5jb25zdCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUnKVxyXG5cclxuLy8gRk9STSBWQVJJQUJMRVNcclxuXHJcbmNvbnN0IHNlbmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fZm9ybWJveF9fc2VuZCcpXHJcbmNvbnN0IG5hbWVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKVxyXG5jb25zdCBtYWlsRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYWlsJylcclxuY29uc3QgcGhvbmVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Bob25lJylcclxuY29uc3QgbWVzc2FnZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZScpXHJcblxyXG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2Zvcm1ib3gnKVxyXG5cclxuLy8gQ09OVEFDVCBQT1BVUCAtIFZBUklBQkxFU1xyXG5cclxuY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKVxyXG5jb25zdCBwb3B1cE9rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9rJylcclxuY29uc3QgcG9wdXBFcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvcicpXHJcbmNvbnN0IHBvcHVwQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3dpbmRvdy1jbG9zZScpXHJcblxyXG4vLyBaT09NIEVWQUNVQVRJT04gUExBTiBJTUFHRVMgLSBWQVJJQUJMRVNcclxuXHJcbmNvbnN0IGFsbFBsYW5JbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGxhbnNfX2JveC1pbWFnZWJveC1pbWcnKVxyXG5jb25zdCBpbWFnZVpvb21TZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmltYWdlem9vbScpXHJcbmNvbnN0IGltYWdlWm9vbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZXpvb21fX2ltYWdlLWltZycpXHJcbmNvbnN0IHpvb21DbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZXpvb21fX2Nsb3NlYnRuJylcclxuXHJcbi8vTkFWSUdBVElPTiBBTkQgQlVSR0VSIEJVVFRPTlxyXG5cclxuY29uc3Qgc2hvd05hdiA9ICgpID0+IHtcclxuXHRuYXZiYXIuY2xhc3NMaXN0LmFkZCgnbmF2YmFyLWFjdGl2ZScpXHJcblx0bmF2YmFyLmNsYXNzTGlzdC5yZW1vdmUoJ25hdmJhci1oaWRlJylcclxuXHRidXJnZXJCYXJzLmNsYXNzTGlzdC5hZGQoJ2J1cmdlci1hY3RpdmUnKVxyXG5cdGJ1cmdlckJhcnMuY2xhc3NMaXN0LnJlbW92ZSgnYnVyZ2VyLWJhY2snKVxyXG59XHJcbmNvbnN0IGhpZGVOYXYgPSAoKSA9PiB7XHJcblx0bmF2YmFyLmNsYXNzTGlzdC5yZW1vdmUoJ25hdmJhci1hY3RpdmUnKVxyXG5cdG5hdmJhci5jbGFzc0xpc3QuYWRkKCduYXZiYXItaGlkZScpXHJcblx0YnVyZ2VyQmFycy5jbGFzc0xpc3QucmVtb3ZlKCdidXJnZXItYWN0aXZlJylcclxuXHRidXJnZXJCYXJzLmNsYXNzTGlzdC5hZGQoJ2J1cmdlci1iYWNrJylcclxufVxyXG5cclxuY29uc3QgbmF2YmFySXRlbUVudHJ5ID0gKCkgPT4ge1xyXG5cdGxldCBkZWxheVRpbWUgPSAwXHJcblxyXG5cdG5hdmJhckxpc3RJdGVtLmZvckVhY2goaXRlbSA9PiB7XHJcblx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ25hdi1lbnRyeScpXHJcblx0XHRpdGVtLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gJy4nICsgZGVsYXlUaW1lICsgJ3MnXHJcblx0XHRkZWxheVRpbWUrK1xyXG5cdH0pXHJcbn1cclxuXHJcbmNvbnN0IHNjcm9sbERpc2FibGUgPSBzY3JvbGxZID0+IHtcclxuXHR3aW5kb3cub25zY3JvbGwgPSAoKSA9PiB7XHJcblx0XHR3aW5kb3cuc2Nyb2xsVG8oe1xyXG5cdFx0XHR0b3A6IHNjcm9sbFksXHJcblx0XHRcdGxlZnQ6IDAsXHJcblx0XHRcdGJlaGF2aW9yOiAnaW5zdGFudCcsXHJcblx0XHR9KVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gZW5hYmxlU2Nyb2xsKCkge1xyXG5cdHdpbmRvdy5vbnNjcm9sbCA9IGZ1bmN0aW9uICgpIHt9XHJcbn1cclxuXHJcbmNvbnN0IG5hdkhhbmRsaW5nID0gKCkgPT4ge1xyXG5cdGlmICghbmF2YmFyLmNsYXNzTGlzdC5jb250YWlucygnbmF2YmFyLWFjdGl2ZScpKSB7XHJcblx0XHRjb25zdCBzY3JvbGxZID0gd2luZG93LnNjcm9sbFlcclxuXHRcdHNjcm9sbERpc2FibGUoc2Nyb2xsWSlcclxuXHRcdHNob3dOYXYoKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRoaWRlTmF2KClcclxuXHRcdGVuYWJsZVNjcm9sbCgpXHJcblx0fVxyXG5cclxuXHRuYXZiYXJJdGVtRW50cnkoKVxyXG5cdG5hdmJhckxpc3RJdGVtLmZvckVhY2goaXRlbSA9PiB7XHJcblx0XHRpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZU5hdilcclxuXHR9KVxyXG59XHJcblxyXG4vLyBDVVJSRU5UIFBBR0UgTkFWSUdBVElPTiBISUdITElHSFRcclxuXHJcbmNvbnN0IG5hdkhpZ2hsaWdodCA9IHBhcmFtcyA9PiB7XHJcblx0Y29uc3QgY3VycmVudFBhZ2UgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVcclxuXHJcblx0c3dpdGNoIChjdXJyZW50UGFnZSkge1xyXG5cdFx0Y2FzZSAnL2luZGV4Lmh0bWwnOlxyXG5cdFx0XHRuYXZiYXJMaXN0SXRlbS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG5cdFx0XHRcdGlmIChpdGVtLmNoaWxkcmVuWzBdLmlkID09ICdtYWluUGFnZScpIHtcclxuXHRcdFx0XHRcdGl0ZW0uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmFkZCgnbGluay1hY3RpdmUnKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdFx0YnJlYWtcclxuXHRcdGNhc2UgJy91c2x1Z2kuaHRtbCc6XHJcblx0XHRjYXNlICcvaW5zdHJ1a2NqZS5odG1sJzpcclxuXHRcdGNhc2UgJy9rb250cm9sZS5odG1sJzpcclxuXHRcdGNhc2UgJy9zemtvbGVuaWEuaHRtbCc6XHJcblx0XHRjYXNlICcvcGxhbnkuaHRtbCc6XHJcblx0XHRcdG5hdmJhckxpc3RJdGVtLmZvckVhY2goaXRlbSA9PiB7XHJcblx0XHRcdFx0aWYgKGl0ZW0uY2hpbGRyZW5bMF0uaWQgPT0gJ3NlcnZpY2VQYWdlJykge1xyXG5cdFx0XHRcdFx0aXRlbS5jaGlsZHJlblswXS5jbGFzc0xpc3QuYWRkKCdsaW5rLWFjdGl2ZScpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHRicmVha1xyXG5cdFx0Y2FzZSAnL2Rvc3dpYWRjemVuaWUuaHRtbCc6XHJcblx0XHRcdG5hdmJhckxpc3RJdGVtLmZvckVhY2goaXRlbSA9PiB7XHJcblx0XHRcdFx0aWYgKGl0ZW0uY2hpbGRyZW5bMF0uaWQgPT0gJ2V4cFBhZ2UnKSB7XHJcblx0XHRcdFx0XHRpdGVtLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5hZGQoJ2xpbmstYWN0aXZlJylcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHRcdGJyZWFrXHJcblx0XHRjYXNlICcvYmF6YS13aWVkenkuaHRtbCc6XHJcblx0XHRcdG5hdmJhckxpc3RJdGVtLmZvckVhY2goaXRlbSA9PiB7XHJcblx0XHRcdFx0aWYgKGl0ZW0uY2hpbGRyZW5bMF0uaWQgPT0gJ0ZBUVBhZ2UnKSB7XHJcblx0XHRcdFx0XHRpdGVtLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5hZGQoJ2xpbmstYWN0aXZlJylcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHRcdGJyZWFrXHJcblx0XHRjYXNlICcva29udGFrdC5odG1sJzpcclxuXHRcdFx0bmF2YmFyTGlzdEl0ZW0uZm9yRWFjaChpdGVtID0+IHtcclxuXHRcdFx0XHRpZiAoaXRlbS5jaGlsZHJlblswXS5pZCA9PSAnY29udGFjdFBhZ2UnKSB7XHJcblx0XHRcdFx0XHRpdGVtLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5hZGQoJ2xpbmstYWN0aXZlJylcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHRcdGJyZWFrXHJcblx0fVxyXG59XHJcblxyXG4vLyBTSE9XIENVUlJFTlQgWUVBUiBJTiBGT09URVJcclxuXHJcbmNvbnN0IGhhbmRsZURhdGUgPSBwYXJhbXMgPT4ge1xyXG5cdGNvbnN0IGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpXHJcblx0ZGF0ZS50ZXh0Q29udGVudCA9IGN1cnJlbnRZZWFyXHJcbn1cclxuXHJcbi8vIENIQU5HRSBOQVZJR0FUSU9OIEJBQ0tHUk9VTkQgQ09MT1JcclxuXHJcbmNvbnN0IHNldE5hdkhlaWdodCA9ICgpID0+IHtcclxuXHRpZiAod2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcclxuXHRcdG5hdkhlaWdodCA9IDg1XHJcblx0XHRoZWFkZXJEYXJrSGVpZ2h0ID0gMjQ1XHJcblx0XHRoZWFkZXJHcmV5SGVpZ2h0ID0gMzk1XHJcblx0fSBlbHNlIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjgpIHtcclxuXHRcdG5hdkhlaWdodCA9IDEwMFxyXG5cdFx0aGVhZGVyRGFya0hlaWdodCA9IDMxMFxyXG5cdFx0aGVhZGVyR3JleUhlaWdodCA9IDQ1MFxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgaGVhZGVyQmdBZGQgPSAoKSA9PiB7XHJcblx0aWYgKHdpbmRvdy5zY3JvbGxZID4gaGVhZGVyRGFya0hlaWdodCkge1xyXG5cdFx0bmF2LmNsYXNzTGlzdC5hZGQoJ25hdi1ibGFjay1iZ2MnKVxyXG5cdFx0bmF2LmNsYXNzTGlzdC5yZW1vdmUoJ25hdi1kYXJrLWJnYycpXHJcblx0XHRuYXYuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LW1lZGl1bS1iZ2MnKVxyXG5cdH0gZWxzZSBpZiAod2luZG93LnNjcm9sbFkgPD0gaGVhZGVyRGFya0hlaWdodCkge1xyXG5cdFx0bmF2LmNsYXNzTGlzdC5yZW1vdmUoJ25hdi1ibGFjay1iZ2MnKVxyXG5cdFx0bmF2LmNsYXNzTGlzdC5yZW1vdmUoJ25hdi1kYXJrLWJnYycpXHJcblx0XHRuYXYuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LW1lZGl1bS1iZ2MnKVxyXG5cdH1cclxuXHRpZiAod2luZG93LnNjcm9sbFkgPiBoZWFkZXJHcmV5SGVpZ2h0KSB7XHJcblx0XHRuYXYuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LWJsYWNrLWJnYycpXHJcblx0XHRuYXYuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LWRhcmstYmdjJylcclxuXHRcdG5hdi5jbGFzc0xpc3QuYWRkKCduYXYtbWVkaXVtLWJnYycpXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBuYXZCYWNrZ3JvdW5kQWRkTW9iaWxlID0gKCkgPT4ge1xyXG5cdGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gd2luZG93LnNjcm9sbFlcclxuXHRzZXROYXZIZWlnaHQoKVxyXG5cclxuXHRhbGxTZWN0aW9uLmZvckVhY2goc2VjdGlvbiA9PiB7XHJcblx0XHRpZiAoc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2hlYWRlci1iZ2MnKSkge1xyXG5cdFx0XHRoZWFkZXJCZ0FkZCgpXHJcblx0XHR9IGVsc2UgaWYgKHNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdkYXJrLWJnYycpICYmIHNlY3Rpb24ub2Zmc2V0VG9wIDw9IGN1cnJlbnRTZWN0aW9uICsgbmF2SGVpZ2h0KSB7XHJcblx0XHRcdG5hdi5jbGFzc0xpc3QucmVtb3ZlKCduYXYtYmxhY2stYmdjJylcclxuXHRcdFx0bmF2LmNsYXNzTGlzdC5hZGQoJ25hdi1kYXJrLWJnYycpXHJcblx0XHRcdG5hdi5jbGFzc0xpc3QucmVtb3ZlKCduYXYtbWVkaXVtLWJnYycpXHJcblx0XHR9IGVsc2UgaWYgKHNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWRpdW0tYmdjJykgJiYgc2VjdGlvbi5vZmZzZXRUb3AgPD0gY3VycmVudFNlY3Rpb24gKyBuYXZIZWlnaHQpIHtcclxuXHRcdFx0bmF2LmNsYXNzTGlzdC5yZW1vdmUoJ25hdi1ibGFjay1iZ2MnKVxyXG5cdFx0XHRuYXYuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LWRhcmstYmdjJylcclxuXHRcdFx0bmF2LmNsYXNzTGlzdC5hZGQoJ25hdi1tZWRpdW0tYmdjJylcclxuXHRcdH1cclxuXHR9KVxyXG59XHJcblxyXG5jb25zdCBuYXZCYWNrZ3JvdW5kQWRkRGVza3RvcCA9ICgpID0+IHtcclxuXHRjb25zdCBjdXJyZW50U2VjdGlvbiA9IHdpbmRvdy5zY3JvbGxZXHJcblx0c2V0TmF2SGVpZ2h0KClcclxuXHJcblx0YWxsU2VjdGlvbi5mb3JFYWNoKHNlY3Rpb24gPT4ge1xyXG5cdFx0aWYgKHNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWRpdW0tYmdjJykgJiYgc2VjdGlvbi5vZmZzZXRUb3AgPD0gY3VycmVudFNlY3Rpb24gKyBuYXZIZWlnaHQpIHtcclxuXHRcdFx0bmF2YmFyLmNsYXNzTGlzdC5hZGQoJ25hdi1kYXJrLWJnYycpXHJcblx0XHRcdG5hdmJhci5jbGFzc0xpc3QucmVtb3ZlKCduYXYtbWVkaXVtLWJnYycpXHJcblx0XHR9IGVsc2UgaWYgKFxyXG5cdFx0XHQoc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmstYmdjJykgJiYgc2VjdGlvbi5vZmZzZXRUb3AgPD0gY3VycmVudFNlY3Rpb24gKyBuYXZIZWlnaHQpIHx8XHJcblx0XHRcdHNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdoZWFkZXItYmdjJylcclxuXHRcdCkge1xyXG5cdFx0XHRuYXZiYXIuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LWRhcmstYmdjJylcclxuXHRcdFx0bmF2YmFyLmNsYXNzTGlzdC5hZGQoJ25hdi1tZWRpdW0tYmdjJylcclxuXHRcdH1cclxuXHR9KVxyXG59XHJcblxyXG4vLyBDT05UQUNUIEZPUk0gVkFMSURBVElPTlxyXG5cclxuY29uc3QgY2hlY2tJbnB1dCA9IGlucHV0ID0+IHtcclxuXHRpbnB1dC5mb3JFYWNoKGVsID0+IHtcclxuXHRcdGlmIChlbC52YWx1ZSA9PT0gJycpIHtcclxuXHRcdFx0c2hvd0Vycm9yKGVsLCBlbC5wbGFjZWhvbGRlcilcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNsZWFyRXJyb3IoZWwpXHJcblx0XHRcdGlmIChlbCA9PT0gbWFpbEZvcm0pIHtcclxuXHRcdFx0XHRjaGVja01haWwoZWwpXHJcblx0XHRcdH0gZWxzZSBpZiAoZWwgPT09IHBob25lRm9ybSkge1xyXG5cdFx0XHRcdGNoZWNrUGhvbmUoZWwpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KVxyXG59XHJcblxyXG5jb25zdCBzaG93RXJyb3IgPSAoaW5wdXQsIG1zZykgPT4ge1xyXG5cdGNvbnN0IGlucHV0Qm94ID0gaW5wdXQucGFyZW50RWxlbWVudFxyXG5cdGNvbnN0IGVycm9yTXNnID0gaW5wdXRCb3gucXVlcnlTZWxlY3RvcignLmVycm9yLXRleHQnKVxyXG5cclxuXHRlcnJvck1zZy5jbGFzc0xpc3QuYWRkKCdzaG93JylcclxuXHRlcnJvck1zZy50ZXh0Q29udGVudCA9IG1zZ1xyXG59XHJcblxyXG5jb25zdCBjbGVhckVycm9yID0gaW5wdXQgPT4ge1xyXG5cdGNvbnN0IGlucHV0Qm94ID0gaW5wdXQucGFyZW50RWxlbWVudFxyXG5cdGNvbnN0IGVycm9yTXNnID0gaW5wdXRCb3gucXVlcnlTZWxlY3RvcignLmVycm9yLXRleHQnKVxyXG5cclxuXHRlcnJvck1zZy5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JylcclxuXHRlcnJvck1zZy50ZXh0Q29udGVudCA9ICdlcnJvcidcclxufVxyXG5cclxuY29uc3QgY2hlY2tNYWlsID0gZW1haWwgPT4ge1xyXG5cdGNvbnN0IHJlID1cclxuXHRcdC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17MiwzfSkpJC9cclxuXHJcblx0ZW1haWwudmFsdWUgPSBlbWFpbC52YWx1ZS50cmltKClcclxuXHJcblx0aWYgKHJlLnRlc3QoZW1haWwudmFsdWUpKSB7XHJcblx0XHRjbGVhckVycm9yKGVtYWlsKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRzaG93RXJyb3IoZW1haWwsICdQb2RhaiBwb3ByYXdueSBlbWFpbCEnKVxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgY2hlY2tQaG9uZSA9IHBob25lID0+IHtcclxuXHRjb25zdCByZSA9IC9eKD88IVxcdykoXFwoPyhcXCt8MDApPzQ4XFwpPyk/WyAtXT9cXGR7M31bIC1dP1xcZHszfVsgLV0/XFxkezN9KD8hXFx3KS9cclxuXHJcblx0aWYgKHJlLnRlc3QocGhvbmUudmFsdWUpKSB7XHJcblx0XHRjbGVhckVycm9yKHBob25lKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRzaG93RXJyb3IocGhvbmUsICdQb2RhaiBwb3ByYXdueSB0ZWxlZm9uIScpXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBjaGVja0Vycm9ycyA9IGlucHV0ID0+IHtcclxuXHRsZXQgZXJyb3JDb3VudCA9IDBcclxuXHJcblx0aW5wdXQuZm9yRWFjaChlbCA9PiB7XHJcblx0XHRpZiAoZWwucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZXJyb3ItdGV4dCcpLnRleHRDb250ZW50ICE9PSAnZXJyb3InKSB7XHJcblx0XHRcdGVycm9yQ291bnQrK1xyXG5cdFx0fVxyXG5cdH0pXHJcblx0aWYgKGVycm9yQ291bnQgPT09IDApIHtcclxuXHRcdGVycm9yQ291bnQgPSAwXHJcblx0XHR2ZXJpZnlDYXB0Y2hhKClcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIGZhbHNlXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCB2ZXJpZnlGb3JtcyA9ICgpID0+IHtcclxuXHRjaGVja0lucHV0KFtuYW1lRm9ybSwgbWFpbEZvcm0sIHBob25lRm9ybSwgbWVzc2FnZUZvcm1dKVxyXG5cdGNoZWNrRXJyb3JzKFtuYW1lRm9ybSwgbWFpbEZvcm0sIHBob25lRm9ybSwgbWVzc2FnZUZvcm1dKVxyXG59XHJcblxyXG5jb25zdCB2ZXJpZnlDYXB0Y2hhID0gKCkgPT4ge1xyXG5cdC8vIHV0d8Ozcnogb2JpZWt0IEZvcm1EYXRhIHogZGFueW1pIGZvcm11bGFyemFcclxuXHRjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pXHJcblxyXG5cdC8vIHd5xZtsaWogxbzEhWRhbmllIEZldGNoIHogZGFueW1pIGZvcm11bGFyemFcclxuXHRmZXRjaCgnbWFpbC5waHAnLCB7XHJcblx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdGJvZHk6IGRhdGEsXHJcblx0XHR0b2tlbjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwdGNoYS10b2tlbicpLnZhbHVlLFxyXG5cdH0pXHJcblx0XHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuXHRcdFx0Ly8gc3ByYXdkxbogc3RhdHVzIG9kcG93aWVkemlcclxuXHRcdFx0Ly8gY29uc29sZS5sb2cocmVzcG9uc2UpXHJcblx0XHRcdGlmIChyZXNwb25zZS5vaykge1xyXG5cdFx0XHRcdGlmIChyZXNwb25zZS51cmwuaW5jbHVkZXMoJz9tYWlsX3N0YXR1cz1zZW50JykpIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdGb3JtdWxhcnogem9zdGHFgiB3eXPFgmFueScpXHJcblx0XHRcdFx0XHRwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cC1zaG93JylcclxuXHRcdFx0XHRcdHBvcHVwT2suc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xyXG5cdFx0XHRcdFx0cG9wdXBFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIGplxZtsaSBixYLEhWQsIHd5xZt3aWV0bCBrb211bmlrYXRcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGBXeXN0xIVwacWCIGLFgsSFZGApXHJcblx0XHRcdFx0XHRwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cC1zaG93JylcclxuXHRcdFx0XHRcdHBvcHVwT2suc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG5cdFx0XHRcdFx0cG9wdXBFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIGplxZtsaSBixYLEhWQsIHd5xZt3aWV0bCBrb211bmlrYXRcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhgV3lzdMSFcGnFgiBixYLEhWQgKCR7cmVzcG9uc2Uuc3RhdHVzfSk6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxyXG5cdFx0XHRcdHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLXNob3cnKVxyXG5cdFx0XHRcdHBvcHVwT2suc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG5cdFx0XHRcdHBvcHVwRXJyb3Iuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG5cdFx0XHQvLyBqZcWbbGkgd3lzdMSFcGnFgiBqYWtpxZsgaW5ueSBixYLEhWQsIHd5xZt3aWV0bCBrb211bmlrYXRcclxuXHRcdFx0Y29uc29sZS5sb2cocmVzcG9uc2UpXHJcblx0XHRcdGNvbnNvbGUubG9nKGBXeXN0xIVwacWCIGLFgsSFZCAoJHtyZXNwb25zZS5zdGF0dXN9KTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApXHJcblx0XHRcdHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLXNob3cnKVxyXG5cdFx0XHRwb3B1cE9rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuXHRcdFx0cG9wdXBFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXHJcblx0XHR9KVxyXG59XHJcblxyXG4vLyBQT1BVUFxyXG5cclxuY29uc3QgY2xvc2VQb3B1cCA9ICgpID0+IHtcclxuXHRwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1zaG93JylcclxufVxyXG5cclxuLy8gWk9PTSBJTUFHRVMgT0YgRVZBQ1VBVElPTiBQTEFOXHJcblxyXG5jb25zdCB6b29tUGxhbkltZ01vYmlsZSA9IGltYWdlID0+IHtcclxuXHRjb25zdCBzcmMgPSBpbWFnZS5zcmNcclxuXHJcblx0d2luZG93Lm9wZW4oc3JjKVxyXG59XHJcblxyXG5jb25zdCB6b29tUGxhbkltZ0Rlc2t0b3AgPSBpbWFnZSA9PiB7XHJcblx0Y29uc3Qgc3JjID0gaW1hZ2Uuc3JjXHJcblxyXG5cdGltYWdlWm9vbVNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnaW1hZ2V6b29tLXNob3cnKVxyXG5cdGltYWdlWm9vbS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNyYylcclxufVxyXG5cclxuY29uc3QgY2xvc2Vab29tU2VjdGlvbiA9ICgpID0+IHtcclxuXHRpbWFnZVpvb21TZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2ltYWdlem9vbS1zaG93JylcclxuXHRpbWFnZVpvb20uc2V0QXR0cmlidXRlKCdzcmMnLCAnJylcclxufVxyXG5cclxuY29uc3Qgem9vbUltZyA9IGUgPT4ge1xyXG5cdC8vd3NrYXp1amUgcG96eWNqZSBrdXJzb3JhXHJcblx0Y29uc3QgeCA9IGUuY2xpZW50WFxyXG5cdGNvbnN0IHkgPSBlLmNsaWVudFlcclxuXHJcblx0Ly9wb3p5Y2phIG9icmF6dVxyXG5cdGNvbnN0IGltZ1ggPSBpbWFnZVpvb20ub2Zmc2V0TGVmdCArIChpbWFnZVpvb21TZWN0aW9uLm9mZnNldExlZnQgLSBpbWFnZVpvb21TZWN0aW9uLm9mZnNldFdpZHRoIC8gMilcclxuXHRjb25zdCBpbWdZID0gaW1hZ2Vab29tLm9mZnNldFRvcCArIChpbWFnZVpvb21TZWN0aW9uLm9mZnNldFRvcCAtIGltYWdlWm9vbVNlY3Rpb24ub2Zmc2V0SGVpZ2h0IC8gMilcclxuXHJcblx0Ly9wb3p5Y2phIGt1cnNvcmEgd2V3bsSFdHJ6IG9icmF6a2FcclxuXHRjb25zdCBuZXdYID0gKGltZ1ggLSB4KSAqIC0xXHJcblx0Y29uc3QgbmV3WSA9IChpbWdZIC0geSkgKiAtMVxyXG5cclxuXHRpbWFnZVpvb20uc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gYCR7bmV3WH1weCAke25ld1l9cHhgXHJcblxyXG5cdGltYWdlWm9vbS5jbGFzc0xpc3QuYWRkKCd6b29tZWQtaW1hZ2UnKVxyXG59XHJcblxyXG5jb25zdCByZXNldEltZyA9ICgpID0+IHtcclxuXHRpbWFnZVpvb20uY2xhc3NMaXN0LnJlbW92ZSgnem9vbWVkLWltYWdlJylcclxufVxyXG5cclxuLy9BREQgRVZFTlQgTElTVEVORVJTXHJcblxyXG5idXJnZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBuYXZIYW5kbGluZylcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcclxuXHRpZiAod2luZG93LmlubmVyV2lkdGggPCA5OTIpIHtcclxuXHRcdG5hdkJhY2tncm91bmRBZGRNb2JpbGUoKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRuYXZCYWNrZ3JvdW5kQWRkRGVza3RvcCgpXHJcblx0fVxyXG59KVxyXG5oYW5kbGVEYXRlKClcclxubmF2SGlnaGxpZ2h0KClcclxuXHJcbmlmIChhbGxQbGFuSW1hZ2VzKSB7XHJcblx0YWxsUGxhbkltYWdlcy5mb3JFYWNoKGltZyA9PiB7XHJcblx0XHRpbWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuXHRcdFx0aWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgMTIwMCkge1xyXG5cdFx0XHRcdHpvb21QbGFuSW1nTW9iaWxlKGltZylcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR6b29tUGxhbkltZ0Rlc2t0b3AoaW1nKVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdH0pXHJcbn1cclxuXHJcbmlmIChpbWFnZVpvb20pIHtcclxuXHRpbWFnZVpvb20uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgem9vbUltZylcclxuXHRpbWFnZVpvb20uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCByZXNldEltZylcclxufVxyXG5cclxuaWYgKHpvb21DbG9zZUJ0bikge1xyXG5cdHpvb21DbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlWm9vbVNlY3Rpb24pXHJcbn1cclxuXHJcbmlmIChzZW5kQnRuKSB7XHJcblx0c2VuZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXHJcblx0XHR2ZXJpZnlGb3JtcygpXHJcblx0fSlcclxufVxyXG5cclxuaWYgKHBvcHVwQ2xvc2UpIHtcclxuXHRwb3B1cENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VQb3B1cClcclxufVxyXG4iXX0=
